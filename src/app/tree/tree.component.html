<ul *ngIf="tree">
  <li
    *ngFor="let node of treeKeys"
    [ngClass]="{
      'has-children': nodeIsExpanded(node),
      expanded: nodeIsExpanded(node)
    }"
  >
    <span (click)="toggleNode(node)">
      {{ node }}
    </span>
    <ng-container *ngIf="nodeIsExpanded(node)">
      <ng-container *ngIf="tree[node] as treeNode">
        <app-tree [tree]="treeNode" *ngIf="isTreeNode(treeNode)"></app-tree>
      </ng-container>
    </ng-container>
  </li>
</ul>
